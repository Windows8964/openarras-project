(function(){var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(n){var y=0;return function(){return y<n.length?{done:!1,value:n[y++]}:{done:!0}}};$jscomp.arrayIterator=function(n){return{next:$jscomp.arrayIteratorImpl(n)}};$jscomp.makeIterator=function(n){var y="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];return y?y.call(n):$jscomp.arrayIterator(n)};$jscomp.arrayFromIterator=function(n){for(var y,A=[];!(y=n.next()).done;)A.push(y.value);return A};
$jscomp.arrayFromIterable=function(n){return n instanceof Array?n:$jscomp.arrayFromIterator($jscomp.makeIterator(n))};$jscomp.getRestArguments=function(){for(var n=Number(this),y=[],A=n;A<arguments.length;A++)y[A-n]=arguments[A];return y};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.getGlobal=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var y=0;y<n.length;++y){var A=n[y];if(A&&A.Math==Math)return A}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(n,y,A){if(n==Array.prototype||n==Object.prototype)return n;n[y]=A.value;return n};$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";
var $jscomp$lookupPolyfilledValue=function(n,y){var A=$jscomp.propertyToPolyfillSymbol[y];if(null==A)return n[y];A=n[A];return void 0!==A?A:n[y]};$jscomp.polyfill=function(n,y,A,L){y&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(n,y,A,L):$jscomp.polyfillUnisolated(n,y,A,L))};
$jscomp.polyfillUnisolated=function(n,y,A,L){A=$jscomp.global;n=n.split(".");for(L=0;L<n.length-1;L++){var H=n[L];if(!(H in A))return;A=A[H]}n=n[n.length-1];L=A[n];y=y(L);y!=L&&null!=y&&$jscomp.defineProperty(A,n,{configurable:!0,writable:!0,value:y})};
$jscomp.polyfillIsolated=function(n,y,A,L){var H=n.split(".");n=1===H.length;L=H[0];L=!n&&L in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var ea=0;ea<H.length-1;ea++){var B=H[ea];if(!(B in L))return;L=L[B]}H=H[H.length-1];A=$jscomp.IS_SYMBOL_NATIVE&&"es6"===A?L[H]:null;y=y(A);null!=y&&(n?$jscomp.defineProperty($jscomp.polyfills,H,{configurable:!0,writable:!0,value:y}):y!==A&&(void 0===$jscomp.propertyToPolyfillSymbol[H]&&(A=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[H]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(H):$jscomp.POLYFILL_PREFIX+A+"$"+H),$jscomp.defineProperty(L,$jscomp.propertyToPolyfillSymbol[H],{configurable:!0,writable:!0,value:y})))};
$jscomp.polyfill("Promise",function(n){function y(){this.batch_=null}function A(B){return B instanceof H?B:new H(function(N,U){N(B)})}if(n&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return n;y.prototype.asyncExecute=function(B){if(null==this.batch_){this.batch_=[];var N=this;this.asyncExecuteFunction(function(){N.executeBatch_()})}this.batch_.push(B)};
var L=$jscomp.global.setTimeout;y.prototype.asyncExecuteFunction=function(B){L(B,0)};y.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var B=this.batch_;this.batch_=[];for(var N=0;N<B.length;++N){var U=B[N];B[N]=null;try{U()}catch(ca){this.asyncThrow_(ca)}}}this.batch_=null};y.prototype.asyncThrow_=function(B){this.asyncExecuteFunction(function(){throw B;})};var H=function(B){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var N=
this.createResolveAndReject_();try{B(N.resolve,N.reject)}catch(U){N.reject(U)}};H.prototype.createResolveAndReject_=function(){function B(ca){return function(ba){U||(U=!0,ca.call(N,ba))}}var N=this,U=!1;return{resolve:B(this.resolveTo_),reject:B(this.reject_)}};H.prototype.resolveTo_=function(B){if(B===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(B instanceof H)this.settleSameAsPromise_(B);else{a:switch(typeof B){case "object":var N=null!=B;break a;case "function":N=
!0;break a;default:N=!1}N?this.resolveToNonPromiseObj_(B):this.fulfill_(B)}};H.prototype.resolveToNonPromiseObj_=function(B){var N=void 0;try{N=B.then}catch(U){this.reject_(U);return}"function"==typeof N?this.settleSameAsThenable_(N,B):this.fulfill_(B)};H.prototype.reject_=function(B){this.settle_(2,B)};H.prototype.fulfill_=function(B){this.settle_(1,B)};H.prototype.settle_=function(B,N){if(0!=this.state_)throw Error("Cannot settle("+B+", "+N+"): Promise already settled in state"+this.state_);this.state_=
B;this.result_=N;2===this.state_&&this.scheduleUnhandledRejectionCheck_();this.executeOnSettledCallbacks_()};H.prototype.scheduleUnhandledRejectionCheck_=function(){var B=this;L(function(){if(B.notifyUnhandledRejection_()){var N=$jscomp.global.console;"undefined"!==typeof N&&N.error(B.result_)}},1)};H.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var B=$jscomp.global.CustomEvent,N=$jscomp.global.Event,U=$jscomp.global.dispatchEvent;if("undefined"===typeof U)return!0;
"function"===typeof B?B=new B("unhandledrejection",{cancelable:!0}):"function"===typeof N?B=new N("unhandledrejection",{cancelable:!0}):(B=$jscomp.global.document.createEvent("CustomEvent"),B.initCustomEvent("unhandledrejection",!1,!0,B));B.promise=this;B.reason=this.result_;return U(B)};H.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var B=0;B<this.onSettledCallbacks_.length;++B)ea.asyncExecute(this.onSettledCallbacks_[B]);this.onSettledCallbacks_=null}};
var ea=new y;H.prototype.settleSameAsPromise_=function(B){var N=this.createResolveAndReject_();B.callWhenSettled_(N.resolve,N.reject)};H.prototype.settleSameAsThenable_=function(B,N){var U=this.createResolveAndReject_();try{B.call(N,U.resolve,U.reject)}catch(ca){U.reject(ca)}};H.prototype.then=function(B,N){function U(fa,la){return"function"==typeof fa?function(Ba){try{ca(fa(Ba))}catch(Ga){ba(Ga)}}:la}var ca,ba,ua=new H(function(fa,la){ca=fa;ba=la});this.callWhenSettled_(U(B,ca),U(N,ba));return ua};
H.prototype.catch=function(B){return this.then(void 0,B)};H.prototype.callWhenSettled_=function(B,N){function U(){switch(ca.state_){case 1:B(ca.result_);break;case 2:N(ca.result_);break;default:throw Error("Unexpected state: "+ca.state_);}}var ca=this;null==this.onSettledCallbacks_?ea.asyncExecute(U):this.onSettledCallbacks_.push(U);this.isRejectionHandled_=!0};H.resolve=A;H.reject=function(B){return new H(function(N,U){U(B)})};H.race=function(B){return new H(function(N,U){for(var ca=$jscomp.makeIterator(B),
ba=ca.next();!ba.done;ba=ca.next())A(ba.value).callWhenSettled_(N,U)})};H.all=function(B){var N=$jscomp.makeIterator(B),U=N.next();return U.done?A([]):new H(function(ca,ba){function ua(Ba){return function(Ga){fa[Ba]=Ga;la--;0==la&&ca(fa)}}var fa=[],la=0;do fa.push(void 0),la++,A(U.value).callWhenSettled_(ua(fa.length-1),ba),U=N.next();while(!U.done)})};return H},"es6","es3");
$jscomp.findInternal=function(n,y,A){n instanceof String&&(n=String(n));for(var L=n.length,H=0;H<L;H++){var ea=n[H];if(y.call(A,ea,H,n))return{i:H,v:ea}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.findIndex",function(n){return n?n:function(y,A){return $jscomp.findInternal(this,y,A).i}},"es6","es3");$jscomp.owns=function(n,y){return Object.prototype.hasOwnProperty.call(n,y)};
$jscomp.polyfill("Object.entries",function(n){return n?n:function(y){var A=[],L;for(L in y)$jscomp.owns(y,L)&&A.push([L,y[L]]);return A}},"es8","es3");$jscomp.polyfill("Object.values",function(n){return n?n:function(y){var A=[],L;for(L in y)$jscomp.owns(y,L)&&A.push(y[L]);return A}},"es8","es3");$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(n){if(n)return n;var y=function(ea,B){this.$jscomp$symbol$id_=ea;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:B})};y.prototype.toString=function(){return this.$jscomp$symbol$id_};var A="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",L=0,H=function(ea){if(this instanceof H)throw new TypeError("Symbol is not a constructor");return new y(A+(ea||"")+"_"+L++,ea)};return H},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(n){if(n)return n;n=Symbol("Symbol.iterator");for(var y="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),A=0;A<y.length;A++){var L=$jscomp.global[y[A]];"function"===typeof L&&"function"!=typeof L.prototype[n]&&$jscomp.defineProperty(L.prototype,n,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return n},"es6",
"es3");$jscomp.iteratorPrototype=function(n){n={next:n};n[Symbol.iterator]=function(){return this};return n};$jscomp.iteratorFromArray=function(n,y){n instanceof String&&(n+="");var A=0,L=!1,H={next:function(){if(!L&&A<n.length){var ea=A++;return{value:y(ea,n[ea]),done:!1}}L=!0;return{done:!0,value:void 0}}};H[Symbol.iterator]=function(){return H};return H};
$jscomp.polyfill("Array.prototype.entries",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(y,A){return[y,A]})}},"es6","es3");$jscomp.polyfill("Number.isFinite",function(n){return n?n:function(y){return"number"!==typeof y?!1:!isNaN(y)&&Infinity!==y&&-Infinity!==y}},"es6","es3");$jscomp.polyfill("Number.isInteger",function(n){return n?n:function(y){return Number.isFinite(y)?y===Math.floor(y):!1}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(n){return n?n:function(y,A,L){var H=this.length||0;0>A&&(A=Math.max(0,H+A));if(null==L||L>H)L=H;L=Number(L);0>L&&(L=Math.max(0,H+L));for(A=Number(A||0);A<L;A++)this[A]=y;return this}},"es6","es3");$jscomp.typedArrayFill=function(n){return n?n:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
(function(){var n,y,A;function L(d){switch(d){case 0:return r.teal;case 1:return r.lgreen;case 2:return r.orange;case 3:return r.yellow;case 4:return r.lavender;case 5:return r.pink;case 6:return r.vlgrey;case 7:return r.lgrey;case 8:return r.guiwhite;case 9:return r.black;case 10:return r.blue;case 11:return r.green;case 12:return r.red;case 13:return r.gold;case 14:return r.purple;case 15:return r.magenta;case 16:return r.grey;case 17:return r.dgrey;case 18:return r.white;case 19:return r.guiblack;
default:return"#FF0000"}}function H(d){var g=Q.graphical.neon?r.white:r.black;return Q.graphical.darkBorders?g:Ha(d,g,r.border)}function ea(d,g){switch(d){case "bas1":return r.blue;case "bas2":return r.green;case "bas3":return r.red;case "bas4":return r.pink;default:return r.white}}function B(d,g){Q.graphical.neon?(d.fillStyle=H(g),d.strokeStyle=g):(d.fillStyle=g,d.strokeStyle=H(g))}function N(d,g){g=void 0===g?ra[d].color:g;var b=ra[d];return{time:0,index:d,x:b.x,y:b.y,vx:0,vy:0,size:b.size,realSize:b.realSize,
color:g,render:{status:{getFade:function(){return 1},getColor:function(){return"#FFFFFF"},getBlend:function(){return 0},health:{get:function(){return 1}},shield:{get:function(){return 1}}}},facing:b.facing,shape:b.shape,name:b.name,score:0,tiggle:0,layer:b.layer,guns:{length:b.guns.length,getPositions:function(){var f=[];b.guns.forEach(function(){return f.push(0)});return f},update:function(){}},turrets:b.turrets.map(function(f){var c=N(f.index);c.realSize=c.realSize/c.size*b.size*f.sizeFactor;c.size=
b.size*f.sizeFactor;c.angle=f.angle;c.offset=f.offset;c.direction=f.direction;c.facing=f.direction+f.angle;c.isheli=b.isheli;return c})}}function U(){var d=document.getElementById("chat");G.chatOpen?(G.chatOpen=0,d.style.animation="menuGo .5s",d.style.animationFillMode="forward",document.getElementById("gameCanvas").focus(),setTimeout(function(){document.getElementById("invisDiv").appendChild(d);"mainBody"==document.activeElement.id&&document.getElementById("gameCanvas").focus()},500)):(G.chatOpen=
1,d.style.animation="menuCome .5s",d.style.animationFillMode="forward",document.body.appendChild(d),document.getElementById("chatbox").focus())}function ca(d,g,b,f){f=void 0===f?!1:f;var c=Ka();b+=Q.graphical.borderChunk;return f?(c*=2,d>-a.screenWidth/c-b&&d<a.screenWidth/c+b&&g>-a.screenHeight/c-b&&g<a.screenHeight/c+b):d>-b&&d<a.screenWidth/c+b&&g>-b&&g<a.screenHeight/c+b}function ba(d,g,b){Date.now();var f=d;return{set:function(c){d!==c&&(d=c,Date.now())},get:function(){return f=S.lerp(f,d,.05)}}}
function ua(d){d=void 0===d?!1:d;a.started=!0;S.submitToLocalStorage("optScreenshotMode");Q.graphical.screenshotMode=document.getElementById("optScreenshotMode").checked;S.submitToLocalStorage("optFancy");Q.graphical.pointy=!document.getElementById("optNoPointy").checked;S.submitToLocalStorage("optNoPointy");Q.graphical.fancyAnimations=!document.getElementById("optFancy").checked;S.submitToLocalStorage("optPredictive");Q.lag.unresponsive=document.getElementById("optPredictive").checked;S.submitToLocalStorage("optBorders");
S.submitToLocalStorage("optOpenScreen");switch(document.getElementById("optBorders").value){case "normal":Q.graphical.darkBorders=Q.graphical.neon=!1;break;case "dark":Q.graphical.darkBorders=!0;Q.graphical.neon=!1;break;case "glass":Q.graphical.darkBorders=!1;Q.graphical.neon=!0;break;case "neon":Q.graphical.darkBorders=Q.graphical.neon=!0}S.submitToLocalStorage("optColors");var g=document.getElementById("optColors").value;r=Wa[""===g?"normal":g];g=document.getElementById("playerNameInput");var b=
document.getElementById("playerKeyInput");S.submitToLocalStorage("playerNameInput");S.submitToLocalStorage("playerKeyInput");a.playerName=G.name=g.value;a.playerKey=b.value.replace(/(<([^>]+)>)/ig,"").substring(0,64);a.screenWidth=window.innerWidth;a.screenHeight=window.innerHeight;d&&(document.getElementById("startMenuWrapper").style.top="-60px",document.getElementById("startMenuWrapper").style.opacity=0,document.getElementById("menu").style.top="-60px",document.getElementById("menu").style.opacity=
0,setTimeout(function(){document.getElementById("startMenuWrapper").style.display="none";document.getElementById("menu").style.display="none"},1E3),a.inGame=!0,a.animations.menuFade=0);a.socket||(S.pullJSON((a.secure?window.location.protocol+"//":"http://")+a.server+"/mockups.json").then(function(f){ra=f}),a.socket=Xa(3E3));window.canvas.socket=a.socket;setInterval(function(){return Ya.iterate(a.socket.cmd.getMotion())},1E3/30);document.getElementById("gameCanvas").focus();window.onbeforeunload=function(){return!0}}
function fa(d,g,b){p.fillStyle=d;p.globalAlpha=g;p.fillRect(0,0,a.screenWidth,a.screenHeight);p.globalAlpha=1}function la(d,g,b,f,c){switch(void 0===c?!1:c){case !0:p.strokeRect(d,g,b,f);break;case !1:p.fillRect(d,g,b,f)}}function Ba(d,g,b,f){f=void 0===f?!1:f;p.beginPath();p.arc(d,g,b,0,2*Math.PI,!1);f?p.stroke():p.fill()}function Ga(d,g,b,f){p.beginPath();p.lineTo(Math.round(d)+.5,Math.round(g)+.5);p.lineTo(Math.round(b)+.5,Math.round(f)+.5);p.closePath();p.stroke()}function ha(d,g,b,f,c){p.beginPath();
p.lineTo(d,b);p.lineTo(g,b);p.lineWidth=f;p.strokeStyle=c;p.closePath();p.stroke()}function Za(){a.scaleGuiRatio=Math.max(a.screenWidth,16*a.screenHeight/9)/(1280>=a.screenWidth?1280:1920<=a.screenWidth?1920:a.screenWidth);a.animLoopHandle=window.requestAnimFrame(Za);G.renderv+=(G.view-G.renderv)/30;var d=Q.graphical.screenshotMode?2:Ka();p.lineCap="round";p.lineJoin="round";p.filter="none";if(a.started)a.gameStart&&!a.disconnected&&(a.time=pa(),1E3<a.time-$a&&(a.socket.ping(a.time),$a=a.time,n=La,
ab=La=0)),a.gameStart?tb(d,a.inGame):a.disconnected||ub(),a.died&&vb(),a.disconnected&&wb();else switch(a.state){case 2:case 0:document.getElementById("optOpenScreen").checked?(a.state=1,S.restoreMenu(),ua(!1)):(fa(r.guiblack),a.animations.logo=S.lerp(a.animations.logo,1,.1),a.animations.enterToStartActivated&&(a.animations.enterToStart=S.lerp(a.animations.enterToStart,1,.1)),fa(r.black,a.animations.logo),p.fillStyle="#ffffff",p.textAlign="center",p.globalAlpha=a.animations.logo,2==a.state&&(p.font=
"Bold "+30*a.animations.logo+"px Ubuntu",p.fillText("ERROR: Old version! Your version: "+a.version+", Server version: "+a.serverVersion,a.screenWidth/2,a.screenHeight/2-100),p.font="Bold "+15*a.animations.logo+"px Ubuntu",p.fillText("Please do CTRL + F5 to reset your browser cache",a.screenWidth/2,a.screenHeight/2-140)),p.font="Bold "+90*a.animations.logo+"px Ubuntu",p.fillText("OpenArras",a.screenWidth/2,a.screenHeight/2),p.font="Bold "+20*a.animations.logo+"px Ubuntu",p.fillText("An opensource arras server everyone can work on, and have fun!",
a.screenWidth/2,a.screenHeight/2+50*a.animations.logo),p.fillText("Made by Winquacks and the creativity from all of you!",a.screenWidth/2,a.screenHeight/2+90*a.animations.logo),p.font="Bold 20px Ubuntu",a.animations.enterToStartActivated&&(p.globalAlpha=a.animations.enterToStart,p.fillText("(Press enter to continue)",a.screenWidth/2,a.screenHeight/2+120*a.animations.logo),p.globalAlpha/=2,p.fillText("(Disable this in the settings section of the options menu)",a.screenWidth/2,a.screenHeight/2+150)),
p.globalAlpha=1)}1==a.state&&(a.animations.menuFadeBlack=S.lerp(a.animations.menuFadeBlack,a.animations.menuFade,.1),fa(r.guiblack,.25*a.animations.menuFadeBlack,4),a.animations.menu=S.lerp(a.animations.menu,0,.1,4),fa(r.guiwhite,a.animations.menu))}var bb="Not compiled";bb="3af2bec9a5baed48324ad5e7183b98e5da4a77070a117c3ea971e3faf81fe4cd";var a={started:!1,inGame:!1,state:0,version:"v0.13",KEY_ESC:27,KEY_ENTER:13,KEY_CHAT:13,KEY_FIREFOOD:119,KEY_SPLIT:32,KEY_LEFT:65,KEY_UP:87,KEY_RIGHT:68,KEY_DOWN:83,
KEY_LEFT_ARROW:37,KEY_UP_ARROW:38,KEY_RIGHT_ARROW:39,KEY_DOWN_ARROW:40,KEY_AUTO_SPIN:67,KEY_AUTO_FIRE:69,KEY_OVER_RIDE:82,KEY_UPGRADE_ATK:49,KEY_UPGRADE_HTL:50,KEY_UPGRADE_SPD:51,KEY_UPGRADE_STR:52,KEY_UPGRADE_PEN:53,KEY_UPGRADE_DAM:54,KEY_UPGRADE_RLD:55,KEY_UPGRADE_MOB:56,KEY_UPGRADE_RGN:57,KEY_UPGRADE_SHI:48,KEY_UPGRADE_MAX:77,KEY_MOUSE_0:32,KEY_MOUSE_1:86,KEY_MOUSE_2:16,KEY_CHOOSE_1:89,KEY_CHOOSE_2:72,KEY_CHOOSE_3:85,KEY_CHOOSE_4:74,KEY_CHOOSE_5:73,KEY_CHOOSE_6:75,KEY_CHOOSE_7:79,KEY_CHOOSE_8:76,
KEY_LEVEL_UP:78,KEY_FUCK_YOU:81,KEY_FUCK_YOUV2:192,screenWidth:window.innerWidth,screenHeight:window.innerHeight,gameWidth:0,gameHeight:0,xoffset:-0,yoffset:-0,gameStart:!1,disconnected:!1,died:!1,kicked:!1,continuity:!1,startPingTime:0,toggleMassState:0,backgroundColor:"#f2fbff",lineColor:"#000000",animations:{logo:0,enterToStart:0,enterToStartActivated:!1,menu:1,scoreBar:1,menuFade:1,menuFadeBlack:1},server:window.top.location.host,secure:!0},S=function(d){d=void 0===d?{}:d;d.restoreMenu=function(){document.getElementById("startMenuWrapper").style.opacity=
1;document.getElementById("startMenuWrapper").style.top="50px";document.getElementById("startMenuWrapper").style.display="block";document.getElementById("menu").style.opacity=1;document.getElementById("menu").style.top="50px";document.getElementById("menu").style.display="block"};d.lerp=function(g,b,f){return g*(1-f)+b*f};d.submitToLocalStorage=function(g){localStorage.setItem(g+"Value",document.getElementById(g).value);localStorage.setItem(g+"Checked",document.getElementById(g).checked);return!1};
d.retrieveFromLocalStorage=function(g){document.getElementById(g).value=localStorage.getItem(g+"Value");document.getElementById(g).checked="true"===localStorage.getItem(g+"Checked");return!1};d.handleLargeNumber=function(g,b){return(void 0===b?0:b)&&0==g?"":g<Math.pow(10,3)?""+g.toFixed(0):g<Math.pow(10,6)?(g/Math.pow(10,3)).toFixed(2)+"k":g<Math.pow(10,9)?(g/Math.pow(10,6)).toFixed(2)+"m":g<Math.pow(10,12)?(g/Math.pow(10,9)).toFixed(2)+"b":g<Math.pow(10,15)?(g/Math.pow(10,12)).toFixed(2)+"t":(g/
Math.pow(10,15)).toFixed(2)+"q"};d.timeForHumans=function(g){function b(m,k){m&&(e=e+(""===e?"":", ")+m+" "+k+(1<m?"s":""))}var f=g%60;g=Math.floor(g/60);var c=g%60;g=Math.floor(g/60);var h=g%24;g=Math.floor(g/24);var e="";b(g,"day");b(h,"hour");b(c,"minute");b(f,"second");""===e&&(e="less than a second");return e};d.addArticle=function(g){return/[aeiouAEIOU]/.test(g[0])?"an "+g:"a "+g};d.formatLargeNumber=function(g){return g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};d.pullJSON=function(g){var b=
new XMLHttpRequest;console.log("Loading JSON from "+g);b.responseType="json";return new Promise(function(f,c){b.open("GET",g);b.onload=function(){f(b.response);console.log("JSON load complete.")};b.onerror=function(){c(b.statusText);console.log("JSON load failed.");console.log(b.statusText)};b.send()})};return d}(),Q={graphical:{screenshotMode:!1,borderChunk:6,barChunk:5,mininumBorderChunk:3,deathBlurAmount:3,darkBorders:!1,fancyAnimations:!0,colors:"normal",pointy:!0,fontSizeBoost:1,neon:!1,shadowColor:"#0000000F"},
gui:{expectedMaxSkillLevel:9},lag:{unresponsive:!1,memory:60}},Wa={normal:{teal:"#7ADBBC",lgreen:"#B9E87E",orange:"#E7896D",yellow:"#FDF380",lavender:"#B58EFD",pink:"#EF99C3",vlgrey:"#E8EBF7",lgrey:"#AA9F9E",guiwhite:"#FFFFFF",black:"#484848",blue:"#3CA4CB",green:"#8ABC3F",red:"#E03E41",gold:"#EFC74B",purple:"#8D6ADF",magenta:"#CC669C",grey:"#A7A7AF",dgrey:"#726F6F",white:"#DBDBDB",guiblack:"#000000",paletteSize:10,border:.65},classic:{teal:"#8EFFFB",lgreen:"#85E37D",orange:"#FC7676",yellow:"#FFEB8E",
lavender:"#B58EFF",pink:"#F177DD",vlgrey:"#CDCDCD",lgrey:"#999999",guiwhite:"#FFFFFF",black:"#525252",blue:"#00B0E1",green:"#00E06C",red:"#F04F54",gold:"#FFE46B",purple:"#768CFC",magenta:"#BE7FF5",grey:"#999999",dgrey:"#545454",white:"#C0C0C0",guiblack:"#000000",paletteSize:10,border:.5},dark:{teal:"#8975B7",lgreen:"#1BA01F",orange:"#C46748",yellow:"#B2B224",lavender:"#7D56C5",pink:"#B24FAE",vlgrey:"#1E1E1E",lgrey:"#3C3A3A",guiwhite:"#000000",black:"#E5E5E5",blue:"#379FC6",green:"#30B53B",red:"#FF6C6E",
gold:"#FFC665",purple:"#9673E8",magenta:"#C8679B",grey:"#635F5F",dgrey:"#73747A",white:"#11110F",guiblack:"#FFFFFF",paletteSize:10,border:.15},natural:{teal:"#76C1BB",lgreen:"#AAD35D",orange:"#E09545",yellow:"#FFD993",lavender:"#939FFF",pink:"#D87FB2",vlgrey:"#C4B6B6",lgrey:"#7F7F7F",guiwhite:"#FFFFFF",black:"#373834",blue:"#4F93B5",green:"#00B659",red:"#E14F65",gold:"#E5BF42",purple:"#8053A0",magenta:"#B67CAA",grey:"#998F8F",dgrey:"#494954",white:"#A5B2A5",guiblack:"#000000",paletteSize:10,border:.2},
forest:{teal:"#884AA5",lgreen:"#8C9B3E",orange:"#D16A80",yellow:"#97596D",lavender:"#499855",pink:"#60294F",vlgrey:"#DDC6B8",lgrey:"#7E949E",guiwhite:"#FFFFE8",black:"#665750",blue:"#807BB6",green:"#A1BE55",red:"#E5B05B",gold:"#FF4747",purple:"#BAC674",magenta:"#BA78D1",grey:"#998866",dgrey:"#529758",white:"#7DA060",guiblack:"#000000",paletteSize:10,border:.7},midnight:{teal:"#2B9098",lgreen:"#4BAA5D",orange:"#345678",yellow:"#CDC684",lavender:"#89778E",pink:"#A85C90",vlgrey:"#CCCCCC",lgrey:"#A7B2B7",
guiwhite:"#BAC6FF",black:"#091F28",blue:"#123455",green:"#098765",red:"#000013",gold:"#566381",purple:"#743784",magenta:"#B29098",grey:"#555555",dgrey:"#649EB7",white:"#444444",guiblack:"#000000",paletteSize:10,border:.6},pastel:{teal:"#89BFBA",lgreen:"#B5D17D",orange:"#E5E0E0",yellow:"#B5BBE5",lavender:"#939FFF",pink:"#646DE5",vlgrey:"#B2B2B2",lgrey:"#7F7F7F",guiwhite:"#FFFFFF",black:"#383835",blue:"#AEAEFF",green:"#AEFFAE",red:"#FFAEAE",gold:"#FFFFFF",purple:"#C3C3D8",magenta:"#FFB5FF",grey:"#CCCCCC",
dgrey:"#A0A0B2",white:"#F2F2F2",guiblack:"#000000",paletteSize:10,border:.35},space:{teal:"#4788F3",lgreen:"#AF1010",orange:"#FF0000",yellow:"#82F850",lavender:"#FFFFFF",pink:"#57006C",vlgrey:"#FFFFFF",lgrey:"#272727",guiwhite:"#000000",black:"#7F7F7F",blue:"#0E1B92",green:"#0AEB80",red:"#C2B90A",gold:"#3E7E8C",purple:"#285911",magenta:"#A9707E",grey:"#6F6A68",dgrey:"#2D0738",white:"#000000",guiblack:"#FFFFFF",paletteSize:10,border:.25},nebula:{teal:"#38B06E",lgreen:"#22882E",orange:"#D28E7F",yellow:"#D5D879",
lavender:"#E084EB",pink:"#DF3E3E",vlgrey:"#F0F2CC",lgrey:"#7D7D7D",guiwhite:"#C2C5EF",black:"#161616",blue:"#9274E6",green:"#89F470",red:"#E08E5D",gold:"#ECDC58",purple:"#58CBEC",magenta:"#EA58EC",grey:"#7E5713",dgrey:"#303030",white:"#555555",guiblack:"#EAEAEA",paletteSize:10,border:.5},bleach:{teal:"#00FFFF",lgreen:"#00FF00",orange:"#FF3200",yellow:"#FFEC00",lavender:"#FF24A7",pink:"#FF3CBD",vlgrey:"#FFF186",lgrey:"#918181",guiwhite:"#F1F1F1",black:"#5F5F5F",blue:"#0025FF",green:"#00FF00",red:"#FF0000",
gold:"#FFFA23",purple:"#3100FF",magenta:"#D4D3D3",grey:"#838383",dgrey:"#4C4C4C",white:"#FFFEFE",guiblack:"#080808",paletteSize:10,border:.4},ocean:{teal:"#76EEC6",lgreen:"#41AA78",orange:"#FF7F50",yellow:"#FFD250",lavender:"#DC3388",pink:"#FA8072",vlgrey:"#8B8886",lgrey:"#BFC1C2",guiwhite:"#FFFFFF",black:"#12466B",blue:"#4200AE",green:"#0D6338",red:"#DC4333",gold:"#FEA904",purple:"#7B4BAB",magenta:"#5C246E",grey:"#656884",dgrey:"#D4D7D9",white:"#3283BC",guiblack:"#000000",paletteSize:10,border:.3},
badlands:{teal:"#F9CB9C",lgreen:"#F1C232",orange:"#38761D",yellow:"#E69138",lavender:"#B7B7B7",pink:"#78866B",vlgrey:"#6AA84F",lgrey:"#B7B7B7",guiwhite:"#A4C2F4",black:"#000000",blue:"#0C5A9E",green:"#6E8922",red:"#5B0000",gold:"#783F04",purple:"#591C77",magenta:"#20124D",grey:"#2F1C16",dgrey:"#999999",white:"#543517",guiblack:"#CFE2F3",paletteSize:10,border:.4}},r=Wa.normal,Ha=function(){return function(d,g,b){b=void 0===b?.5:b;if(1===b)return g;if(0===b)return d;for(var f="#",c=1;6>=c;c+=2){var h=
parseInt(g.substr(c,2),16),e=parseInt(d.substr(c,2),16);for(h=Math.floor(e+(h-e)*b).toString(16);2>h.length;)h="0"+h;f+=h}return f}}(),ra=[];a.clickables=function(){var d=function(){function g(){var b=0,f=0,c=0,h=0,e=!1;return{set:function(m,k,D,q){b=m;f=k;c=D;h=q;e=!0},check:function(m){var k=Math.round(m.x-b);m=Math.round(m.y-f);return e&&0<=k&&0<=m&&k<=c&&m<=h},hide:function(){e=!1}}}return function(b){for(var f=[],c=0;c<b;c++)f.push(g());return{place:function(h){var e=$jscomp.getRestArguments.apply(1,
arguments);if(h>=f.length)throw console.log(h),console.log(f),Error("Trying to reference a clickable outside a region!");f[h].set.apply(f[h],$jscomp.arrayFromIterable(e))},hide:function(){f.forEach(function(h){return h.hide()})},check:function(h){return f.findIndex(function(e){return e.check(h)})}}}}();return{stat:d(10),upgrade:d(8),hover:d(1),skipUpgrades:d(1)}}();a.statHover=!1;a.upgradeHover=!1;var G={reset:function(){G={reset:G.reset,vx:0,vy:0,x:a.screenWidth/2,y:a.screenHeight/2,lastvx:0,lastvy:0,
renderx:a.screenWidth/2,rendery:a.screenHeight/2,lastx:a.screenWidth/2,lasty:a.screenHeight/2,target:{x:a.screenWidth/2,y:a.screenHeight/2},name:"",lastUpdate:0,time:0}}};G.reset();var sa=function(d){this.dataLength=d;this.elements={}};sa.prototype.update=function(d,g){g=void 0===g?0:g;for(var b=d[g++],f=0;f<b;f++)delete this.elements[d[g++]];b=d[g++];for(f=0;f<b;f++){var c=d[g++],h=d.slice(g,g+this.dataLength);g+=this.dataLength;this.elements[c]=h}return g};sa.prototype.entries=function(){return Object.entries(this.elements).map(function(d){var g=
$jscomp.makeIterator(d);d=g.next().value;g=g.next().value;return{id:+d,data:g}})};var Ma=function(d){this.speed=void 0===d?250:d;this.map={};this.lastUpdate=Date.now()};Ma.prototype.update=function(d){this.lastUpdate=Date.now();for(var g=$jscomp.makeIterator(Object.entries(this.map)),b=g.next();!b.done;b=g.next()){var f=$jscomp.makeIterator(b.value);b=f.next().value;f=f.next().value;f.now?(f.old=f.now,f.now=null):delete this.map[b]}d=$jscomp.makeIterator(d);for(g=d.next();!g.done;g=d.next())g=g.value,
this.map[g.id]?this.map[g.id].now=g:this.map[g.id]={old:null,now:g}};Ma.prototype.get=function(){var d=Math.min(1,(Date.now()-this.lastUpdate)/this.speed),g=1-d;return Object.values(this.map).map(function(b){var f=b.old;return(b=b.now)?f?{type:b.type,id:b.id,x:d*b.x+g*f.x,y:d*b.y+g*f.y,color:b.color,size:d*b.size+g*f.size,alpha:1}:{type:b.type,id:b.id,x:b.x,y:b.y,color:b.color,size:b.size,alpha:d}:{type:f.type,id:f.id,x:f.x,y:f.y,color:f.color,size:f.size,alpha:g}})};var Na=function(d){this.score=
ba(0,10);this.update(d)};Na.prototype.update=function(d){this.name=d.name;this.bar=d.bar;this.color=d.color;this.index=d.index;this.score.set(d.score);this.old=!1};Na.prototype.publish=function(){var d=ra[this.index];return{image:N(this.index,this.color),position:d.position,barColor:L(this.bar),label:"2tkr"==a.gameMode?this.name:0<this.name.length?this.name+" - "+d.name:d.name,score:this.score.get()}};var Oa=function(){this.entries={}};Oa.prototype.get=function(){for(var d=[],g=1,b=$jscomp.makeIterator(Object.values(this.entries)),
f=b.next();!f.done;f=b.next())f=f.value.publish(),d.push(f),f.score>g&&(g=f.score);d.sort(function(c,h){return h.score-c.score});return{data:d,max:g}};Oa.prototype.update=function(d){d.sort(function(f,c){return c.score-f.score});for(var g=$jscomp.makeIterator(Object.values(this.entries)),b=g.next();!b.done;b=g.next())b.value.old=!0;d=$jscomp.makeIterator(d);for(g=d.next();!g.done;g=d.next())g=g.value,this.entries[g.id]?this.entries[g.id].update(g):this.entries[g.id]=new Na(g);d=$jscomp.makeIterator(Object.entries(this.entries));
for(g=d.next();!g.done;g=d.next())g=$jscomp.makeIterator(g.value),b=g.next().value,g.next().value.old&&delete this.entries[b]};var xa=[],cb=new sa(5),db=new sa(3),eb=new sa(5),Ja=0,Ia=a.messages=[];a.chatmessages=[];var fb=new Oa,gb=new Ma(200),$a=A=n=y=0,La=0,ab=0,Pa={x:G.x,y:G.y},Ca=[["norm"]],M={getStatNames:function(d){switch(d){case 1:return"Body Damage;Max Health;Bullet Speed;Bullet Health;Bullet Penetration;Bullet Damage;Engine Acceleration;Movement Speed;Shield Regeneration;Shield Capacity".split(";");
case 2:return"Body Damage;Max Health;Drone Speed;Drone Health;Drone Penetration;Drone Damage;Respawn Rate;Movement Speed;Shield Regeneration;Shield Capacity".split(";");case 3:return"Body Damage;Max Health;Drone Speed;Drone Health;Drone Penetration;Drone Damage;Max Drone Count;Movement Speed;Shield Regeneration;Shield Capacity".split(";");case 4:return"Body Damage;Max Health;Swarm Speed;Swarm Health;Swarm Penetration;Swarm Damage;Reload;Movement Speed;Shield Regeneration;Shield Capacity".split(";");
case 5:return"Body Damage;Max Health;Placement Speed;Trap Health;Trap Penetration;Trap Damage;Reload;Movement Speed;Shield Regeneration;Shield Capacity".split(";");case 6:return"Body Damage;Max Health;Weapon Speed;Weapon Health;Weapon Penetration;Weapon Damage;Reload;Movement Speed;Shield Regeneration;Shield Capacity".split(";");default:return"Body Damage;Max Health;Bullet Speed;Bullet Health;Bullet Penetration;Bullet Damage;Reload;Movement Speed;Shield Regeneration;Shield Capacity".split(";")}},
skills:[{amount:0,color:"purple",cap:1,softcap:1},{amount:0,color:"pink",cap:1,softcap:1},{amount:0,color:"blue",cap:1,softcap:1},{amount:0,color:"lgreen",cap:1,softcap:1},{amount:0,color:"red",cap:1,softcap:1},{amount:0,color:"yellow",cap:1,softcap:1},{amount:0,color:"green",cap:1,softcap:1},{amount:0,color:"teal",cap:1,softcap:1},{amount:0,color:"gold",cap:1,softcap:1},{amount:0,color:"orange",cap:1,softcap:1}],points:0,upgrades:[],playerid:-1,__s:function(){var d=0,g=0,b=0,f=ba(0,10);return{setScore:function(c){c?
(f.set(c),g>f.get()&&(g=b=0)):(f=ba(0,10),b=0)},update:function(){d=Math.ceil(1.8*Math.pow(b+1,1.8)-2*b+1);f.get()-g>=d&&(g+=d,b+=1)},getProgress:function(){return d?Math.min(1,Math.max(0,(f.get()-g)/d)):0},getScore:function(){return f.get()},getLevel:function(){return b}}}(),type:0,fps:0,color:0,accel:0,topspeed:1};a.clearUpgrades=function(){M.upgrades=[]};document.getElementById("chatbutton").onclick=function(){a.socket.talk("h",document.getElementById("chatbox").value);document.getElementById("chatbox").value=
"";document.getElementById("gameCanvas").focus();U(G)};var Ka=function(){return Math.max(a.screenWidth/G.renderv,a.screenHeight/G.renderv/9*16)};a.target=Pa;a.player=G;a.canUpgrade=!1;a.canSkill=!1;a.message="";a.time=0;a.mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);window.onload=function(){S.retrieveFromLocalStorage("playerNameInput");S.retrieveFromLocalStorage("playerKeyInput");S.retrieveFromLocalStorage("optScreenshotMode");S.retrieveFromLocalStorage("optPredictive");
S.retrieveFromLocalStorage("optFancy");S.retrieveFromLocalStorage("optColors");S.retrieveFromLocalStorage("optNoPointy");S.retrieveFromLocalStorage("optBorders");S.retrieveFromLocalStorage("optOpenScreen");""===document.getElementById("optColors").value&&(document.getElementById("optColors").value="normal");""===document.getElementById("optBorders").value&&(document.getElementById("optBorders").value="normal");document.getElementById("startButton").onclick=function(){ua(!0);window.canvas.socket.talk("s",
a.playerName,0);a.state=3};document.onkeydown=function(d){(d.which||d.keyCode)==a.KEY_ENTER&&(0==a.state?(a.state=1,S.restoreMenu(),ua(!1)):a.disconnected&&(a.state=1,S.restoreMenu(),G.reset(),ua(!1),a.gameStart=!1,a.disconnected=!1,a.socket=Xa(3E3)))};window.addEventListener("resize",function(){G.screenWidth=Qa.width=a.screenWidth=window.innerWidth;G.screenHeight=Qa.height=a.screenHeight=window.innerHeight})};sa=function(d){this.directionLock=!1;this.target=a.target;this.reenviar=!0;this.socket=
a.socket;this.directions=[];this.cv=document.getElementById("gameCanvas");this.cv.width=a.screenWidth;this.cv.height=a.screenHeight;this.cv.addEventListener("mousemove",this.gameInput,!1);this.cv.addEventListener("keydown",this.keyboardDown,!1);this.cv.addEventListener("keyup",this.keyboardUp,!1);this.cv.addEventListener("mousedown",this.mouseDown,!1);this.cv.addEventListener("mouseup",this.mouseUp,!1);this.cv.parent=this;a.canvas=this};sa.prototype.keyboardDown=function(d){switch(d.keyCode){case a.KEY_UPGRADE_MAX:this.statMaxing=
!0;break;case 13:a.died&&(a.state=1,S.restoreMenu(),ua(!1),a.died=!1);3==a.state&&U(this);break;case a.KEY_UP_ARROW:case a.KEY_UP:this.parent.socket.cmd.set(0,!0);break;case a.KEY_DOWN_ARROW:case a.KEY_DOWN:this.parent.socket.cmd.set(1,!0);break;case a.KEY_LEFT_ARROW:case a.KEY_LEFT:this.parent.socket.cmd.set(2,!0);break;case a.KEY_RIGHT_ARROW:case a.KEY_RIGHT:this.parent.socket.cmd.set(3,!0);break;case a.KEY_MOUSE_0:this.parent.socket.cmd.set(4,!0);break;case a.KEY_MOUSE_1:this.parent.socket.cmd.set(5,
!0);break;case a.KEY_MOUSE_2:this.parent.socket.cmd.set(6,!0);break;case a.KEY_LEVEL_UP:this.parent.socket.talk("L");break;case a.KEY_FUCK_YOU:this.parent.socket.talk("0","activate");break;case a.KEY_FUCK_YOUV2:var g=document.getElementById("devmenu");if(this.devmenuOpen){this.devmenuOpen=0;g.style.animation="menuGo .5s";g.style.animationFillMode="forward";var b=document.getElementById("devkeyFunct").value,f=document.getElementById("devkeyPos").value,c=document.getElementById("devkeyPosOffsetX").value,
h=document.getElementById("devkeyPosOffsetY").value,e=document.getElementById("devkeyOptions").value,m=document.getElementById("devGodmode").checked,k=document.getElementById("devInvisible").checked,D=document.getElementById("devHover").checked,q=document.getElementById("devSetScore").value,l=document.getElementById("devSetSkillpoints").value,v=document.getElementById("devSetHealth").value,E=document.getElementById("devSetSpeed").value;this.parent.socket.talk("0","settings",b,f,c,h,e,m,k,D,q,l,v,
E);document.getElementById("gameCanvas").focus();setTimeout(function(){document.getElementById("invisDiv").appendChild(g)},500)}else this.devmenuOpen=1,g.style.animation="menuCome .5s",g.style.animationFillMode="forward",document.body.appendChild(g)}if(!d.repeat){switch(d.keyCode){case a.KEY_AUTO_SPIN:this.parent.socket.talk("t",0);break;case a.KEY_AUTO_FIRE:this.parent.socket.talk("t",1);break;case a.KEY_OVER_RIDE:this.parent.socket.talk("t",2)}if(a.canSkill){b=this.statMaxing?15:1;do switch(d.keyCode){case a.KEY_UPGRADE_ATK:this.parent.socket.talk("x",
0);break;case a.KEY_UPGRADE_HTL:this.parent.socket.talk("x",1);break;case a.KEY_UPGRADE_SPD:this.parent.socket.talk("x",2);break;case a.KEY_UPGRADE_STR:this.parent.socket.talk("x",3);break;case a.KEY_UPGRADE_PEN:this.parent.socket.talk("x",4);break;case a.KEY_UPGRADE_DAM:this.parent.socket.talk("x",5);break;case a.KEY_UPGRADE_RLD:this.parent.socket.talk("x",6);break;case a.KEY_UPGRADE_MOB:this.parent.socket.talk("x",7);break;case a.KEY_UPGRADE_RGN:this.parent.socket.talk("x",8);break;case a.KEY_UPGRADE_SHI:this.parent.socket.talk("x",
9)}while(--b)}if(a.canUpgrade)switch(d.keyCode){case a.KEY_CHOOSE_1:this.parent.socket.talk("U",0);break;case a.KEY_CHOOSE_2:this.parent.socket.talk("U",1);break;case a.KEY_CHOOSE_3:this.parent.socket.talk("U",2);break;case a.KEY_CHOOSE_4:this.parent.socket.talk("U",3);break;case a.KEY_CHOOSE_5:this.parent.socket.talk("U",4);break;case a.KEY_CHOOSE_6:this.parent.socket.talk("U",5);break;case a.KEY_CHOOSE_7:this.parent.socket.talk("U",6);break;case a.KEY_CHOOSE_8:this.parent.socket.talk("U",7)}}};
sa.prototype.keyboardUp=function(d){switch(d.keyCode){case a.KEY_UPGRADE_MAX:this.statMaxing=!1;break;case a.KEY_UP_ARROW:case a.KEY_UP:this.parent.socket.cmd.set(0,!1);break;case a.KEY_DOWN_ARROW:case a.KEY_DOWN:this.parent.socket.cmd.set(1,!1);break;case a.KEY_LEFT_ARROW:case a.KEY_LEFT:this.parent.socket.cmd.set(2,!1);break;case a.KEY_RIGHT_ARROW:case a.KEY_RIGHT:this.parent.socket.cmd.set(3,!1);break;case a.KEY_MOUSE_0:this.parent.socket.cmd.set(4,!1);break;case a.KEY_MOUSE_1:this.parent.socket.cmd.set(5,
!1);break;case a.KEY_MOUSE_2:this.parent.socket.cmd.set(6,!1)}};sa.prototype.mouseDown=function(d){switch(d.button){case 0:d={x:d.clientX,y:d.clientY};var g=a.clickables.stat.check(d);-1!==g?this.parent.socket.talk("x",g):-1!==a.clickables.skipUpgrades.check(d)?a.clearUpgrades():(d=a.clickables.upgrade.check(d),-1!==d?this.parent.socket.talk("U",d):this.parent.socket.cmd.set(4,!0));break;case 1:this.parent.socket.cmd.set(5,!0);break;case 2:this.parent.socket.cmd.set(6,!0)}};sa.prototype.mouseUp=function(d){switch(d.button){case 0:this.parent.socket.cmd.set(4,
!1);break;case 1:this.parent.socket.cmd.set(5,!1);break;case 2:this.parent.socket.cmd.set(6,!1)}};sa.prototype.gameInput=function(d){this.parent.target.x=d.clientX-this.width/2;this.parent.target.y=d.clientY-this.height/2;a.target=this.parent.target;a.statHover=0===a.clickables.hover.check({x:d.clientX,y:d.clientY})};window.canvas=new sa;var Qa=window.canvas.cv,p=Qa.getContext("2d"),hb=document.createElement("canvas").getContext("2d");hb.imageSmoothingEnabled=!1;document.getElementById("startMenuWrapper").style.opacity=
0;document.getElementById("menu").style.opacity=0;document.getElementById("gameAreaWrapper").style.opacity=1;var va=[],Ra=0,ib=0,jb=function(){var d=[];return{get:function(){return d.length?d.reduce(function(g,b){return g+b})/d.length:0},add:function(g){d.push(g);d.length>Q.lag.memory&&d.splice(0,1)}}}(),pa=function(){return Date.now()-Ra-ib},Ya=function(){var d=0,g=0,b=0,f=0;return{reset:function(){g=d=0},get:function(){return Q.lag.unresponsive?{x:0,y:0}:{x:d,y:g}},iterate:function(c){if(a.died||
a.gameStart)return 0;var h=M.accel/M.topSpeed,e=Math.sqrt(c.x*c.x+c.y*c.y);b+=M.accel*c.x/e;f+=M.accel*c.y/e;c=Math.sqrt(b*b+f*f);0<c&&h&&(h=c/(h/0+1),b=h*b/c,f=h*f/c);d+=b;g+=f}}}(),Xa=function(){window.WebSocket=window.WebSocket||window.MozWebSocket;var d=function(b){b=void 0===b?{}:b;var f=new Uint32Array(1),c=new Uint8Array(f.buffer),h=new Float32Array(f.buffer),e=new Uint16Array(1),m=new Uint8Array(e.buffer);(function(){var k=new Uint8Array(1),D=new Uint16Array(1),q=new Uint8Array(D.buffer),
l=new Uint32Array(1),v=new Uint8Array(l.buffer),E=new Float32Array(1),J=new Uint8Array(E.buffer),x=function(C,t){var K="";switch(C){case "RawUint8":return k[0]=t,String.fromCharCode(k[0]);case "RawUint16":return D[0]=t,String.fromCharCode(q[0],q[1]);case "Uint8":return k[0]=t,"0"+String.fromCharCode(k[0]);case "Uint16":return D[0]=t,"1"+String.fromCharCode(q[0],q[1]);case "Uint32":return l[0]=t,"2"+String.fromCharCode(v[0],v[1],v[2],v[3]);case "Sint8":return k[0]=-1-t,"3"+String.fromCharCode(k[0]);
case "Sint16":return D[0]=-1-t,"4"+String.fromCharCode(q[0],q[1]);case "Sint32":return l[0]=-1-t,"5"+String.fromCharCode(v[0],v[1],v[2],v[3]);case "Float32":return E[0]=t,"6"+String.fromCharCode(J[0],J[1],J[2],J[3]);case "String8":return"7"+x("RawUint16",t.length)+t;case "String16":C=0;for(var I=t.length;C<I;C++)K+=x("RawUint16",t.charCodeAt(C));return"8"+x("RawUint16",K.length)+K;default:throw Error("Unknown encoding type.");}},w=function(C){if("string"===typeof C){for(var t=0;t<C.length;t++)if(255<
C.charCodeAt(t))return"String16";return"String8"}if("boolean"===typeof C)return"Uint8";if("number"!==typeof C)throw console.log(C),Error("Unencodable data type");if(C!==Math.floor(C))return"Float32";if(0>C){if(-256<=C)return"Sint8";if(-65535<=C)return"Sint16";if(-4294967295<=C)return"Sint32"}else{if(256>C)return"Uint8";if(65535>C)return"Uint16";if(4294967295>C)return"Uint32"}return"Float32"};return function(C,t){t=void 0===t?!1:t;var K=C.shift();if("string"!==typeof K)throw Error("No identification code!");
C.forEach(function(Z){return K+=x(w(Z),Z)});C=K.length;for(var I=new ArrayBuffer(C),F=new Uint8Array(I),O=0;O<C;O++)F[O]=K.charCodeAt(O);t&&(console.log("OUTPUT: "+F),console.log("RAW OUTPUT: "+K),console.log("SIZE: "+C));return I}})();(function(){new Uint8Array(1);var k=new Uint16Array(1),D=new Uint8Array(k.buffer),q=new Uint32Array(1),l=new Uint8Array(q.buffer),v=new Float32Array(1),E=new Uint8Array(v.buffer),J=function(x,w,C){switch(w){case "Uint8":return x.charCodeAt(C++);case "Uint16":for(w=
0;2>w;w++)D[w]=x.charCodeAt(C++);return k[0];case "Uint32":for(w=0;4>w;w++)l[w]=x.charCodeAt(C++);return q[0];case "Sint8":return-1-x.charCodeAt(C++);case "Sint16":for(w=0;2>w;w++)D[w]=x.charCodeAt(C++);return-1-k[0];case "Sint32":for(w=0;4>w;w++)l[w]=x.charCodeAt(C++);return-1-q[0];case "Float32":for(w=0;4>w;w++)E[w]=x.charCodeAt(C++);return v[0];default:throw Error("Unknown decoding type.");}};return function(x){try{var w=new Uint8Array(x);x="";for(var C=0;C<w.length;C++)x+=String.fromCharCode(w[C]);
w=1;for(var t=[x.charAt(0)];w<x.length;)switch(x[w++]){case "0":t.push(J(x,"Uint8",w));w++;break;case "1":t.push(J(x,"Uint16",w));w+=2;break;case "2":t.push(J(x,"Uint32",w));w+=4;break;case "3":t.push(J(x,"Sint8",w));w++;break;case "4":t.push(J(x,"Sint16",w));w+=2;break;case "5":t.push(J(x,"Sint32",w));w+=4;break;case "6":t.push(J(x,"Float32",w));w+=4;break;case "7":var K=J(x,"Uint16",w);w+=2;t.push(x.slice(w,w+K));w+=K;break;case "8":var I=J(x,"Uint16",w);w+=2;var F=x.slice(w,w+I),O=new Uint16Array(I/
2);for(C=0;C<I;C+=2)O[C/2]=J(F,"Uint16",C);t.push(String.fromCharCode.apply(null,O));w+=I;break;default:throw Error("Unknown decoding command. Decoding exited.");}return t}catch(Z){return console.log(Z),-1}}})();b.encode=function(k){for(var D=[],q=[],l=0,v=15,E=0,J=$jscomp.makeIterator(k),x=J.next();!x.done;x=J.next()){x=x.value;var w=0;if(0===x||!1===x)w=0;else if(1===x||!0===x)w=1;else if("number"===typeof x)!Number.isInteger(x)||-4294967296>x||4294967296<=x?(w=8,l+=4):0<=x?256>x?(w=2,l++):65536>
x?(w=4,l+=2):4294967296>x&&(w=6,l+=4):-256<=x?(w=3,l++):-65536<=x?(w=5,l+=2):-4294967296<=x&&(w=7,l+=4);else if("string"===typeof x){w=!1;for(var C=0;C<x.length;C++)if("\u00ff"<x.charAt(C))w=!0;else if("\x00"===x.charAt(C))throw console.error("Null containing string",x),Error("Null containing string");!w&&1>=x.length?(w=9,l++):w?(w=11,l+=2*x.length+2):(w=10,l+=x.length+1)}else throw console.error("Unencodable data type",x),Error("Unencodable data type");D.push(w);if(w===v)E++;else{q.push(v);if(1<=
E){for(;19<E;)q.push(14),q.push(15),E-=19;1===E?q.push(v):2===E?q.push(12):3===E?q.push(13):20>E&&(q.push(14),q.push(E-4))}E=0;v=w}}q.push(v);if(1<=E){for(;19<E;)q.push(14),q.push(15),E-=19;1===E?q.push(v):2===E?q.push(12):3===E?q.push(13):20>E&&(q.push(14),q.push(E-4))}q.push(15);1===q.length%2&&q.push(15);l=new Uint8Array((q.length>>1)+l);for(v=0;v<q.length;v+=2)l[v>>1]=q[v]<<4|q[v+1];q=q.length>>1;for(v=0;v<D.length;v++)switch(E=k[v],D[v]){case 2:case 3:l[q++]=E;break;case 4:case 5:e[0]=E;l.set(m,
q);q+=2;break;case 6:case 7:f[0]=E;l.set(c,q);q+=4;break;case 8:h[0]=E;l.set(c,q);q+=4;break;case 9:E=0===E.length?0:E.charCodeAt(0);l[q++]=E;break;case 10:for(J=0;J<E.length;J++)l[q++]=E.charCodeAt(J);l[q++]=0;break;case 11:for(J=0;J<E.length;J++)x=E.charCodeAt(J),l[q++]=x&255,l[q++]=x>>8;l[q++]=0;l[q++]=0}return l};b.decode=function(k){k=new Uint8Array(k);if(15!==k[0]>>4)return null;for(var D=[],q=15,l=0,v=!0;;){if(l>=k.length)return null;var E=k[l];v?(E&=15,l++):E>>=4;v=!v;if(12===(E&12)){if(15===
E){v&&l++;break}var J=E-10;if(14===E){if(l>=k.length)return null;E=k[l];v?(E&=15,l++):E>>=4;v=!v;J+=E}for(E=0;E<J;E++)D.push(q)}else D.push(E),q=E}q=[];D=$jscomp.makeIterator(D);for(v=D.next();!v.done;v=D.next())switch(v.value){case 0:q.push(0);break;case 1:q.push(1);break;case 2:q.push(k[l++]);break;case 3:q.push(k[l++]-256);break;case 4:m[0]=k[l++];m[1]=k[l++];q.push(e[0]);break;case 5:m[0]=k[l++];m[1]=k[l++];q.push(e[0]-65536);break;case 6:c[0]=k[l++];c[1]=k[l++];c[2]=k[l++];c[3]=k[l++];q.push(f[0]);
break;case 7:c[0]=k[l++];c[1]=k[l++];c[2]=k[l++];c[3]=k[l++];q.push(f[0]-4294967296);break;case 8:c[0]=k[l++];c[1]=k[l++];c[2]=k[l++];c[3]=k[l++];q.push(h[0]);break;case 9:v=k[l++];q.push(0===v?"":String.fromCharCode(v));break;case 10:for(v="";J=k[l++];)v+=String.fromCharCode(J);q.push(v);break;case 11:for(v="";J=k[l++]|k[l++]<<8;)v+=String.fromCharCode(J);q.push(v)}return q};return b}(),g=function(){var b=function(){var f=0,c=[];return{next:function(){if(f>=c.length)throw console.log(c),Error("Trying to crawl past the end of the provided data!");
return c[f++]},all:function(){return c.slice(f)},take:function(h){f+=h;if(f>c.length)throw console.error(c),Error("Trying to crawl past the end of the provided data!");},set:function(h){c=h;f=0}}}();return{begin:function(f){return b.set(f)},data:function(){var f=function(){function c(){var e="normal",m=pa();return{set:function(k){if(k!==e||"injured"===e)"dying"!==e&&(m=pa()),e=k},getFade:function(){return"dying"===e||"killed"===e?1-Math.min(1,(pa()-m)/300):1},getColor:function(){return"#FFFFFF"},
getBlend:function(){var k="normal"===e||"dying"===e?0:1-Math.min(1,(pa()-m)/80);500<pa()-m&&"injured"===e&&(e="normal");return k}}}var h=function(){function e(m){m.isUpdated=!0;if(m.motion||m.position)m.motion-=.2*m.position,m.position+=m.motion,0>m.position&&(m.position=0,m.motion=-m.motion),0<m.motion&&(m.motion*=.5)}return function(m){for(var k=[],D=0;D<m;D++)k.push({motion:0,position:0,isUpdated:!0});return{getPositions:function(){return k.map(function(q){return q.position})},update:function(){return k.forEach(e)},
fire:function(q,l){k[q].isUpdated&&(k[q].motion+=Math.sqrt(l)/20);k[q].isUpdated=!1},length:k.length}}}();return function(e){e=void 0===e?{}:e;var m=null==e.facing,k=b.next();if(k&1)e.facing=b.next(),e.layer=b.next();else{e.interval=A;e.id=b.next();m=xa.findIndex(function(v){return v.id===e.id});-1!==m&&(e=xa.splice(m,1)[0]);m=-1===m;m||(e.render.draws=!0,e.render.lastx=e.x,e.render.lasty=e.y,e.render.lastvx=e.vx,e.render.lastvy=e.vy,e.render.lastf=e.facing,e.render.lastRender=G.time);e.index=b.next();
e.x=b.next();e.y=b.next();e.vx=b.next();e.vy=b.next();e.size=b.next();e.facing=b.next();e.vfacing=b.next();e.twiggle=b.next();e.layer=b.next();e.color=b.next();if(m)e.health=b.next()/255,e.shield=b.next()/255;else{var D=e.health,q=e.shield;e.health=b.next()/255;e.shield=b.next()/255;e.health<D||e.shield<q?e.render.status.set("injured"):1!==e.render.status.getFade()&&e.render.status.set("normal")}e.drawsHealth=!!(k&2);e.alpha=b.next()/255;k&4&&(e.name=b.next(),e.score=b.next());e.nameplate=k&4;m&&
(e.render={draws:!1,expandsWithDeath:e.drawsHealth,lastRender:G.time,x:e.x,y:e.y,lastx:e.x-1E3/30*Q.roomSpeed*A*e.vx,lasty:e.y-1E3/30*Q.roomSpeed*A*e.vy,lastvx:e.vx,lastvy:e.vy,lastf:e.facing,f:e.facing,h:e.health,s:e.shield,interval:A,slip:0,status:c(),health:ba(e.health,.5,5),shield:ba(e.shield,.5,5)});e.render.health.set(e.health);e.render.shield.set(e.shield);m||e.oldIndex===e.index||(m=!0);e.oldIndex=e.index}k=b.next();if(m)e.guns=h(k);else if(k!==e.guns.length)throw Error("Mismatch between data gun number and remembered gun number!");
for(D=0;D<k;D++){q=b.next();var l=b.next();q>G.lastUpdate-A&&e.guns.fire(D,l)}k=b.next();if(m)for(e.turrets=[],m=0;m<k;m++)e.turrets.push(f());else{if(e.turrets.length!==k)throw Error("Mismatch between data turret number and remembered turret number!");for(m=0;m<e.turrets.length;m++)e.turrets[m]=f(e.turrets[m])}return e}}();return function(){for(var c=[],h=0,e=b.next();h<e;h++)c.push(f());for(h=0;h<xa.length;h++)e=xa[h],e.render.status.set(1===e.health?"dying":"killed"),0!==e.render.status.getFade()&&
ca(e.render.x-G.renderx,e.render.y-G.rendery,e.size,!0)?c.push(e):null!=e.render.textobjs&&e.render.textobjs.forEach(function(m){return m.remove()});xa=c;xa.sort(function(m,k){var D=m.layer-k.layer;D||(D=k.id-m.id);if(!D)throw Error("tha fuq is up now");return D})}}(),gui:function(){var f=b.next(),c=f&256,h=f&128,e=f&64,m=f&32,k=f&16,D=f&8,q=f&4,l=f&2;f&1&&(M.fps=b.next());l&&(M.type=b.next(),M.color=b.next(),M.playerid=b.next());q&&M.__s.setScore(b.next());D&&(M.points=b.next());if(k)for(M.upgrades=
[],f=0,k=b.next();f<k;f++)M.upgrades.push(b.next());if(m)for(m=9;0<=m;m--)M.skills[m].name=b.next(),M.skills[m].cap=b.next(),M.skills[m].softcap=b.next();e&&(e=parseInt(b.next(),36).toString(16),e="0000000000".substr(e.length)+e,M.skills[0].amount=parseInt(e.slice(0,1),16),M.skills[1].amount=parseInt(e.slice(1,2),16),M.skills[2].amount=parseInt(e.slice(2,3),16),M.skills[3].amount=parseInt(e.slice(3,4),16),M.skills[4].amount=parseInt(e.slice(4,5),16),M.skills[5].amount=parseInt(e.slice(5,6),16),M.skills[6].amount=
parseInt(e.slice(6,7),16),M.skills[7].amount=parseInt(e.slice(7,8),16),M.skills[8].amount=parseInt(e.slice(8,9),16),M.skills[9].amount=parseInt(e.slice(9,10),16));h&&(M.accel=b.next());c&&(M.topspeed=b.next())},broadcast:function(){var f=b.all(),c=cb.update(f);c=db.update(f,c);c=eb.update(f,c);b.take(c);f=[];c=$jscomp.makeIterator(cb.entries());for(var h=c.next();!h.done;h=c.next()){h=h.value;var e=h.data;f.push({id:h.id,type:e[0],x:e[1]*a.gameWidth/255,y:e[2]*a.gameHeight/255,color:e[3],size:e[4]})}c=
$jscomp.makeIterator(db.entries());for(h=c.next();!h.done;h=c.next())h=h.value,e=h.data,f.push({id:h.id,type:0,x:e[0]*a.gameWidth/255,y:e[1]*a.gameHeight/255,color:e[2],size:0});gb.update(f);f=[];c=$jscomp.makeIterator(eb.entries());for(h=c.next();!h.done;h=c.next())h=h.value,e=h.data,f.push({id:h.id,score:e[0],index:e[1],name:e[2],color:e[3],bar:e[4]});fb.update(f)}}}();return function(b){var f=new WebSocket((a.secure?"https:"==window.location.protocol?"wss://":"ws://":"ws://")+window.top.location.host+
"/server");f.binaryType="arraybuffer";f.open=!1;f.cmd=function(){var c=!1,h=[!1,!1,!1,!1,!1,!1,!1,!1];return{set:function(e,m){h[e]!==m&&(h[e]=m,c=!0)},talk:function(){c=!1;for(var e=0,m=0;8>m;m++)h[m]&&(e+=Math.pow(2,m));m=Ka();f.talk("C",Math.round(window.canvas.target.x/m),Math.round(window.canvas.target.y/m),e)},check:function(){return c},getMotion:function(){return{x:h[3]-h[2],y:h[1]-h[0]}}}}();f.talk=function(){var c=$jscomp.getRestArguments.apply(0,arguments);if(!f.open)return 1;f.send(d.encode(c))};
f.onopen=function(){f.open=!0;a.message="That token is invalid, expired, or already in use on this server. Please try another one!";f.talk("k",a.playerKey);console.log("Token submitted to the server for validation.");f.ping=function(c){f.talk("p",c)};f.commandCycle=setInterval(function(){f.cmd.check()&&f.cmd.talk()})};f.onmessage=function(c){c=d.decode(c.data);if(-1===c)throw Error("Malformed packet.");switch(c.splice(0,1)[0]){case "w":c[0]&&(console.log("The server has welcomed us to the game room. Sending spawn request."),
a.message="");break;case "R":a.gameWidth=c[0];a.gameHeight=c[1];Ca=JSON.parse(c[2]);ib=JSON.parse(c[3]);Q.roomSpeed=c[4];console.log("Room data recieved. Commencing syncing process.");f.talk("S",pa());break;case "c":break;case "S":var h=c[0];c=c[1];h=(pa()-h)/2;c=pa()-h-c;va.push({delta:c,latency:h});if(10>va.length)setTimeout(function(){f.talk("S",pa())},10),a.message="Syncing clocks, please do not tab away. "+va.length+"/10...";else{va.sort(function(x,w){return x.latency-w.latency});var e=va[Math.floor(va.length/
2)].latency,m=0,k=0,D=0;va.forEach(function(x){m+=Math.pow(x.latency-e,2)});m=Math.sqrt(m/va.length);va.forEach(function(x){Math.abs(x.latency-e)<m&&(k+=x.delta,D++)});Ra=Math.round(k/D);console.log(va);console.log("Syncing complete, calculated clock difference "+Ra+"ms. Beginning game.");a.gameStart=!0;a.message=""}break;case "m":if(0==c[0])break;Ia.push({text:c[0],status:2,alpha:c[1]?c[1]:0,color:c[2]?c[2]:r.dgrey,textcolor:c[3]?c[3]:r.guiwhite,time:Date.now()});break;case "u":h=c[0];var q=c[1],
l=c[2],v=c[3],E=c[4],J=c[5];c=c.slice(6);if(h>G.lastUpdate){jb.add(pa()-h);G.time=h+jb.get();A=h-G.lastUpdate;0>=A&&console.log("yo some bullshit is up wtf");G.lastUpdate=h;g.begin(c);g.gui();g.data();G.cx=q;G.cy=l;G.lastx=G.x;G.lasty=G.y;G.lastvx=G.vx;G.lastvy=G.vy;G.x=q;G.y=l;G.vx=a.died?0:E;G.vy=a.died?0:J;isNaN(G.renderx)&&(G.renderx=G.x);isNaN(G.rendery)&&(G.rendery=G.y);Ya.reset();G.view=v;if(isNaN(G.renderv)||0===G.renderv)G.renderv=2E3;pa()}else console.log("Old data! Last given time: "+G.time+
"; offered packet timestamp: "+h+".");f.talk("d",Math.max(G.lastUpdate,h));f.cmd.talk();ab++;break;case "b":g.begin(c);g.broadcast();break;case "p":y=a.time-c[0];break;case "F":a.finalScore=ba(0,4);a.finalScore.set(c[0]);a.finalLifetime=ba(0,5);a.finalLifetime.set(c[1]);a.finalKills=[ba(0,3),ba(0,4.5),ba(0,2.5)];a.finalKills[0].set(c[2]);a.finalKills[1].set(c[3]);a.finalKills[2].set(c[4]);a.finalKillers=[];for(h=0;h<c[5];h++)a.finalKillers.push(c[6+h]);a.died=!0;window.onbeforeunload=function(){return!1};
break;case "K":window.onbeforeunload=function(){return!1};break;default:throw Error("Unknown message index.");}};f.onclose=function(){f.open=!1;a.disconnected=!0;1==a.state&&ua(!0);clearInterval(f.commandCycle);window.onbeforeunload=function(){return!1};console.log("Socket closed.")};f.onerror=function(c){console.log("WebSocket error: "+c);a.message="Socket error. Maybe another server will work."};return f}}(),Sa=function(){var d=document.createElement("div");document.body.appendChild(d);return function(g,
b,f){b+=Q.graphical.fontSizeBoost;d.style.font="bold "+b+"px Ubuntu";d.style.padding="0";d.style.margin="0";d.style.position="absolute";d.style.visibility="hidden";d.innerHTML=g;g=d.clientWidth;b=d.clientHeight;return(void 0===f?0:f)?{width:g,height:b}:g}}(),z=function(){var d=function(b){b=void 0===b?null:b;var f=!0;return{update:function(c){var h=!1;if(null==b)h=!0;else switch(typeof c!=typeof b&&(h=!0),typeof c){case "number":case "string":c!==b&&(h=!0);break;case "object":if(Array.isArray(c)){if(c.length!==
b.length)h=!0;else for(var e=0,m=c.length;e<m;e++)c[e]!==b[e]&&(h=!0);break}default:throw console.log(c),Error("Unsupported type for a floppyvar!");}h&&(f=!0,b=c)},publish:function(){return b},check:function(){return f?(f=!1,!0):!1}}},g=0;return function(){var b=document.createElement("canvas"),f="textCanvasNo"+g++;b.setAttribute("id",f);var c=b.getContext("2d");c.imageSmoothingEnabled=!1;var h=[d(""),d(0),d(0),d(1),d("#FF0000"),d("left")];h.map(function(k){return k.publish()});var e=0,m=0;return{draw:function(k,
D,q,l,v,E,J,x){E=void 0===E?"left":E;J=void 0===J?!1:J;l+=Q.graphical.fontSizeBoost;x=p.getTransform().a;l*=x;h[0].update(k);h[1].update(D);h[2].update(q);h[3].update(l);h[4].update(v);h[5].update(E);if(h.some(function(t){return t.check()})){var w=Math.max(3,l/5),C=Sa(k,l-Q.graphical.fontSizeBoost,!0);c.canvas.height=C.height+2*w;c.canvas.width=C.width+2*w;switch(E){case "left":case "start":e=w;break;case "center":e=c.canvas.width/2;break;case "right":case "end":e=c.canvas.width-w}m=c.canvas.height/
2;c.lineWidth=w;c.font="bold "+l+"px Ubuntu";c.textAlign=E;c.textBaseline="middle";c.strokeStyle=r.black;c.fillStyle=v;c.lineCap="round";c.lineJoin="round";c.strokeText(k,e,m);c.fillText(k,e,m)}p.save();p.imageSmoothingEnabled=!1;p.drawImage(c.canvas,Math.round(D-e/x),Math.round(q-m*(1.05+.45*!J)/x),c.canvas.width/x,c.canvas.height/x);p.restore()},remove:function(){var k=document.getElementById(f);null!=k&&k.parentNode.removeChild(k)}}}}(),Da=function(){return function(d,g,b,f,c,h,e,m,k,D,q,l){c=
void 0===c?1:c;h=void 0===h?1:h;e=void 0===e?0:e;m=void 0===m?!1:m;k=void 0===k?!1:k;D=void 0===D?!1:D;q=void 0===q?b.render:q;var v=k||p,E=D?1:q.status.getFade();h=h*f*b.size;var J=ra[b.index],x=d,w=g;D=!1===D?b:D;if(0!==E&&0!==c){q.expandsWithDeath&&(h*=1+.5*(1-E));if(k!==p&&(1!==E||1!==c))if(Q.graphical.fancyAnimations)v=hb,v.canvas.width=v.canvas.height=h*J.position.axis+20*f,x=v.canvas.width/2-h*J.position.axis*J.position.middle.x*Math.cos(e)/4,w=v.canvas.height/2-h*J.position.axis*J.position.middle.x*
Math.sin(e)/4,k=!1;else if(.5>E*c)return;"object"!==typeof v&&(v=p);v.lineCap="round";v.lineJoin="round";if(!l){if(D.turrets.length===J.turrets.length)for(var C=0;C<J.turrets.length;C++){var t=J.turrets[C];if(0===t.layer){var K=t.direction+t.angle+e,I=t.offset*h;Da(x+I*Math.cos(K),w+I*Math.sin(K),t,f,c,h/f/t.size*t.sizeFactor,D.turrets[C].facing+m*e,m,v,D.turrets[C],q,l)}}else throw Error("Mismatch turret number with mockup.");D.guns.update();v.lineWidth=Math.max(Q.graphical.mininumBorderChunk,f*
Q.graphical.borderChunk);B(v,l?Q.graphical.shadowColor:Ha(r.grey,q.status.getColor(),q.status.getBlend()));if(D.guns.length===J.guns.length)for(C=D.guns.getPositions(),t=0;t<J.guns.length;t++){var F=J.guns[t],O=C[t]/(1===F.aspect?2:1);K=v;I=x+h*(F.offset*Math.cos(F.direction+F.angle+e)+(F.length/2-O)*Math.cos(F.angle+e));var Z=w+h*(F.offset*Math.sin(F.direction+F.angle+e)+(F.length/2-O)*Math.sin(F.angle+e));O=h*(F.length/2-(1===F.aspect?2*O:0));var V=h*F.width/2,W=F.aspect;F=F.angle+e;var da=!l;da=
void 0===da?!0:da;W=0<W?[V*W,V]:[V,-V*W];V=[Math.atan2(W[0],O),Math.atan2(W[1],O)];O=[Math.sqrt(O*O+W[0]*W[0]),Math.sqrt(O*O+W[1]*W[1])];K.beginPath();K.lineTo(I+O[0]*Math.cos(F+V[0]),Z+O[0]*Math.sin(F+V[0]));K.lineTo(I+O[1]*Math.cos(F+Math.PI-V[1]),Z+O[1]*Math.sin(F+Math.PI-V[1]));K.lineTo(I+O[1]*Math.cos(F+Math.PI+V[1]),Z+O[1]*Math.sin(F+Math.PI+V[1]));K.lineTo(I+O[0]*Math.cos(F-V[0]),Z+O[0]*Math.sin(F-V[0]));K.closePath();da&&K.stroke();K.fill()}else throw Error("Mismatch gun number with mockup.");
}v.globalAlpha=1;B(v,l?Q.graphical.shadowColor:Ha(L(b.color),q.status.getColor(),q.status.getBlend()));b=v;C=x;t=w;K=h/J.size*J.realSize;I=J.shape;F=e;Z=!0;O=!l;Z=void 0===Z?!0:Z;O=void 0===O?!0:O;F=(void 0===F?0:F)+(I%2?0:Math.PI/I);b.beginPath();if(!I)F=b.strokeStyle,da=b.fillStyle,O&&(b.fillStyle=F,b.arc(C,t,K+p.lineWidth/2,0,2*Math.PI),b.fill()),p.closePath(),p.beginPath(),b.fillStyle=da,b.arc(C,t,K,0,2*Math.PI),b.fill(),p.closePath();else if(0>I)for(Q.graphical.pointy&&(b.lineJoin="miter"),da=
1-6/I/I,I=-I,b.moveTo(C+K*Math.cos(F),t+K*Math.sin(F)),V=0;V<I;V++){W=(V+1)/I*2*Math.PI;var T=(V+.5)/I*2*Math.PI;b.quadraticCurveTo(C+K*da*Math.cos(T+F),t+K*da*Math.sin(T+F),C+K*Math.cos(W+F),t+K*Math.sin(W+F))}else if(0<I)for(da=0;da<I;da++)V=da/I*2*Math.PI,b.lineTo(C+K*Math.cos(V+F),t+K*Math.sin(V+F));b.closePath();0!=I&&(O&&b.stroke(),Z&&b.fill());b.lineJoin="round";if(!l)if(D.turrets.length===J.turrets.length)for(b=0;b<J.turrets.length;b++)C=J.turrets[b],1===C.layer&&(t=C.direction+C.angle+e,
K=C.offset*h,Da(x+K*Math.cos(t),w+K*Math.sin(t),C,f,c,h/f/C.size*C.sizeFactor,D.turrets[b].facing+m*e,m,v,D.turrets[b],q,l));else throw Error("Mismatch turret number with mockup.");k||v===p||(p.save(),p.globalAlpha=c*E,p.drawImage(v.canvas,d-x,g-w),p.restore())}}}();window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(d){}}();window.cancelAnimFrame=window.cancelAnimationFrame||
window.mozCancelAnimationFrame;var tb=function(){function d(){var t=[];return function(K,I,F,O,Z,V){for(t.push(K);t.length>O;)t.splice(0,1);K=Math.min.apply(Math,$jscomp.arrayFromIterable(t));var W=Math.max.apply(Math,$jscomp.arrayFromIterable(t)),da=W-K;0<W&&0>K&&ha(I,I+O,F+Z*W/da,2,r.guiwhite);p.beginPath();var T=-1;t.forEach(function(P){++T?p.lineTo(I+T,F+Z*(W-P)/da):p.moveTo(I,F+Z*(W-P)/da)});p.lineWidth=1;p.strokeStyle=V;p.stroke()}}var g=ba(0,.7,1.5),b=ba(0,2,3),f=function(){return function(){var t=
0,K=0;return{set:function(I,F){I=void 0===I?G.time:I;F=void 0===F?A:F;t=Math.max(pa()-I-80,-F);150<t&&1E3>t&&(t=150);1E3<t&&(t=1E6*Math.sin(t/1E3-1)/t+1E3);K=t/F},predict:function(I,F,O,Z){if(0<=t)I=F+(F-I)*K;else{var V=Math.cos((1+K)*Math.PI);I=.5*(((1+K)*O+I)*(V+1)+(-K*Z+F)*(1-V))}return I},predictFacing:function(I,F){var O=2*Math.PI;return I+(1+K)*(((F-I+Math.PI)%O+O)%O-Math.PI)},lerp:S.lerp,lerpAngle:function(I,F,O,Z){var V=Math.sin(I),W=Math.sin(F);I=S.lerp(Math.cos(I),Math.cos(F),O,Z);O=S.lerp(V,
W,O,Z);return Math.atan2(O,I)},getPrediction:function(){return t}}}}();d();d();d();var c=function(){for(var t=[],K=0;K<2*Q.gui.expectedMaxSkillLevel;K++)t.push(Math.log(K/Q.gui.expectedMaxSkillLevel*4+1)/Math.log(5));return function(I){return t[I]}}(),h=[z(),z(),z(),z(),z(),z(),z(),z(),z(),z()],e=[z(),z(),z(),z(),z(),z(),z(),z(),z(),z()],m=[z(),z(),z(),z(),z(),z(),z(),z(),z(),z()],k=z(),D=z(),q=z(),l=z(),v=[z(),z(),z(),z(),z(),z(),z()],E=z(),J=[z(),z(),z(),z(),z(),z(),z(),z(),z(),z()],x=[z(),z(),
z(),z(),z(),z(),z(),z()],w=[z(),z(),z(),z(),z(),z(),z(),z()],C=z();return function(t){La++;var K=f();K.set();K.getPrediction();G.renderx=S.lerp(G.renderx,G.cx,.2);G.rendery=S.lerp(G.rendery,G.cy,.2);var I=t*G.renderx;var F=t*G.rendery;fa(r.white,1);fa(r.guiblack,.1);var O=Ca[0].length,Z=Ca.length,V=0;Ca.forEach(function(u){var R=0;u.forEach(function(Y){var ia=Math.max(0,t*R*a.gameWidth/O-I+a.screenWidth/2),X=Math.max(0,t*V*a.gameHeight/Z-F+a.screenHeight/2),wa=Math.min(a.screenWidth,t*(R+1)*a.gameWidth/
O-I+a.screenWidth/2),ja=Math.min(a.screenHeight,t*(V+1)*a.gameHeight/Z-F+a.screenHeight/2);p.globalAlpha=1;p.fillStyle=Q.graphical.screenshotMode?r.guiwhite:r.white;p.fillRect(ia,X,wa-ia,ja-X);p.globalAlpha=.3;p.fillStyle=Q.graphical.screenshotMode?r.guiwhite:ea(Y,!0);p.fillRect(ia,X,wa-ia,ja-X);R++});V++});p.globalAlpha=1;xa.forEach(function(u){if(!u.render.draws)return 1;var R=f();1===u.render.status.getFade()?R.set():R.set(u.render.lastRender,u.render.interval);u.render.x=R.lerp(u.render.x,u.x+
u.vx,.25);u.render.y=R.lerp(u.render.y,u.y+u.vy,.25);u.render.f=u.id!==M.playerid||u.twiggle?R.lerpAngle(u.render.f,u.facing,.25):Math.atan2(Pa.y,Pa.x);R=t*u.render.x-I;var Y=t*u.render.y-F;R+=a.screenWidth/2;Y+=a.screenHeight/2;Da(R,Y+20*t,u,t,u.id===M.playerid||a.showInvisible?u.alpha?.6*u.alpha+.4:.25:u.alpha,1.2,u.render.f,void 0,void 0,void 0,void 0,!0)});xa.forEach(function(u){if(!u.render.draws)return 1;var R=t*u.render.x-I,Y=t*u.render.y-F;R+=a.screenWidth/2;Y+=a.screenHeight/2;Da(R,Y,u,t,
u.id===M.playerid||a.showInvisible?u.alpha?.6*u.alpha+.4:.25:u.alpha,1,u.render.f)});Q.graphical.screenshotMode||xa.forEach(function(u){var R=t*u.render.x-I,Y=t*u.render.y-F;R+=a.screenWidth/2;Y+=a.screenHeight/2;if(u.alpha){p.globalAlpha=Math.pow(u.render.status.getFade(),2);var ia=u.size*t/1.1,X=ra[u.index];X=ia/X.size*X.realSize;if(u.drawsHealth){var wa=u.render.health.get(),ja=u.render.shield.get();if(1>wa||1>ja){var Ta=Y+1.1*X+15*t;ha(R-ia,R+ia,Ta,(2+Q.graphical.barChunk)*t,r.black);ha(R-ia,
R-ia+2*ia*wa,Ta,3.5*t,r.lgreen);ja&&(p.globalAlpha=.3+.3*ja,ha(R-ia,R-ia+2*ia*ja,Ta,2*t,r.teal),p.globalAlpha=1)}}u.nameplate&&u.id!==M.playerid&&(null==u.render.textobjs&&(u.render.textobjs=[z(),z()]),"\x00"!==u.name?(u.render.textobjs[0].draw(u.alpha?u.name:"",R,Y-X-30,16,r.guiwhite,"center"),u.render.textobjs[1].draw(S.handleLargeNumber(u.alpha?u.score:"",!0),R,Y-X-16,8,r.guiwhite,"center")):(u.render.textobjs[0].draw("a spoopy \ud83d\udc7b",R,Y-X-30,16,r.lavender,"center"),u.render.textobjs[1].draw(S.handleLargeNumber(u.score,
!0),R,Y-X-16,8,r.lavender,"center")))}});K=function(u,R){a.screenWidth/=u;a.screenHeight/=u;p.scale(u,u);R||(a.scaleGuiRatio*=u)};K(a.scaleGuiRatio,!0);M.__s.update();for(var W=fb.get(),da=W.max,T=a.screenWidth/2,P=20,ma=Ia.length-1;0<=ma;ma--){var aa=Ia[ma],kb=aa.text;null==aa.textobj&&(aa.textobj=z());null==aa.len&&(aa.len=Sa(kb,14));p.globalAlpha=.5*aa.alpha;ha(T-aa.len/2,T+aa.len/2,P+9,18,aa.color);p.globalAlpha=Math.min(1,aa.alpha);aa.textobj.draw(kb,T,P+9,14,aa.textcolor,"center",!0);P+=22;
1<aa.status&&(P-=22*(1-Math.sqrt(aa.alpha)));1<aa.status?(aa.status-=.05,aa.alpha+=.05):0===ma&&(5<Ia.length||1E4<Date.now()-aa.time)&&(aa.status-=.05,aa.alpha-=.05,0>=aa.alpha&&(Ia[0].textobj.remove(),Ia.splice(0,1)))}p.globalAlpha=1;a.canSkill=!!M.points;g.set(0+(a.canSkill||a.died||a.statHover));a.clickables.stat.hide();var ka=200,lb=ka,na=-20-2*ka+g.get()*(40+2*ka),oa=a.screenHeight-20-15,Ea=11,xb=M.getStatNames(ra[M.type].statnames||-1);M.skills.forEach(function(u){Ea--;var R=xb[Ea-1],Y=u.amount,
ia=r[u.color],X=u.softcap;u=u.cap;if(X){ka=lb;var wa=Q.gui.expectedMaxSkillLevel,ja=X<u;X>wa&&(wa=X);ha(na+7.5,na-7.5+ka*c(X),oa+7.5,12+Q.graphical.barChunk,r.black);ha(na+7.5,na+7.5+(ka-35)*c(X),oa+7.5,12,r.grey);ha(na+7.5,na+7.5+(ka-35)*c(Y),oa+7.5,11.5,ia);if(ja)for(p.lineWidth=1,p.strokeStyle=r.grey,ja=X+1;ja<wa;ja++)Ga(na+(ka-35)*c(ja),oa+1.5,na+(ka-35)*c(ja),oa-3+15);p.strokeStyle=r.black;for(ja=p.lineWidth=1;ja<Y+1;ja++)Ga(na+(ka-35)*c(ja),oa+1.5,na+(ka-35)*c(ja),oa-3+15);ka=lb*c(wa);X=Y==
u?ia:!M.points||X!==u&&Y==X?r.grey:r.guiwhite;h[Ea-1].draw(R,Math.round(na+ka/2)+.5,oa+7.5,10,X,"center",!0);e[Ea-1].draw("["+Ea%10+"]",Math.round(na+ka-3.75)-1.5,oa+7.5,10,X,"right",!0);X===r.guiwhite&&a.clickables.stat.place(Ea-1,na*a.scaleGuiRatio,oa*a.scaleGuiRatio,ka*a.scaleGuiRatio,15*a.scaleGuiRatio);Y&&m[Ea-1].draw(X===ia?"MAX":"+"+Y,Math.round(na+ka+4)+.5,oa+7.5,10,ia,"left",!0);oa-=19}});a.clickables.hover.place(0,0,oa*a.scaleGuiRatio,.8*ka*a.scaleGuiRatio,.8*(a.screenHeight-oa)*a.scaleGuiRatio);
0!==M.points&&k.draw("x"+M.points,Math.round(na+ka-2)+.5,Math.round(oa+15-4)+.5,20,r.guiwhite,"right");a.inGame&&(a.animations.scoreBar=S.lerp(a.animations.scoreBar,0,.1));p.save();p.translate(0,200*a.animations.scoreBar);T=25;P=(a.screenWidth-330)/2;ma=a.screenHeight-20-T;p.lineWidth=1;ha(P,P+330,ma+T/2,T-3+Q.graphical.barChunk,r.black);ha(P,P+330,ma+T/2,T-3,r.grey);ha(P,P+330*M.__s.getProgress(),ma+T/2,T-3.5,r.gold);l.draw("Level "+M.__s.getLevel()+" "+ra[M.type].name,P+165,ma+T/2,T-4,r.guiwhite,
"center",!0);T=14;ma-=T+4;ha(P+33,P+297,ma+T/2,T-3+Q.graphical.barChunk,r.black);ha(P+33,P+297,ma+T/2,T-3,r.grey);ha(P+33,P+330*(.1+.8*(da?Math.min(1,M.__s.getScore()/da):1)),ma+T/2,T-3.5,r.green);D.draw("Score: "+S.handleLargeNumber(M.__s.getScore()),P+165,ma+T/2,T-2,r.guiwhite,"center",!0);p.lineWidth=4;q.draw(G.name,Math.round(P+165)+.5,Math.round(ma-10-4)+.5,32,r.guiwhite,"center");p.restore();var ya=a.screenWidth-200-20,za=a.screenHeight-200-20;p.globalAlpha=.6;var mb=Ca[0].length,nb=Ca.length,
ob=0;Ca.forEach(function(u){var R=0;u.forEach(function(Y){p.fillStyle=ea(Y,!1);la(ya+200*R++/mb,za+200*ob/nb,200/mb,200/nb)});ob++});p.globalAlpha=.3;p.fillStyle=Ha(r.grey,r.vlgrey);la(ya,za,200,200);p.globalAlpha=1;T=$jscomp.makeIterator(gb.get());for(P=T.next();!P.done;P=T.next())P=P.value,p.fillStyle=Ha(L(P.color),r.black,.3),2===P.type?la(ya+(P.x-P.size)/a.gameWidth*200-.4,za+(P.y-P.size)/a.gameWidth*200-1,2*P.size/a.gameWidth*200+.2,2*P.size/a.gameWidth*200+.2):1===P.type?Ba(ya+P.x/a.gameWidth*
200,za+P.y/a.gameWidth*200,P.size/a.gameWidth*200+.2):P.id!==M.playerid&&Ba(ya+P.x/a.gameWidth*200,za+P.y/a.gameWidth*200,2);p.globalAlpha=1;p.lineWidth=1;p.strokeStyle=r.black;p.fillStyle=r.black;Ba(ya+G.x/a.gameWidth*200-1,za+G.y/a.gameWidth*200-1,2,!1);p.lineWidth=3;p.fillStyle=r.black;la(ya,za,200,200,!0);v[3].draw("openarras-"+bb,a.screenWidth/2,16,12,r.guiwhite,"center");v[1].draw((100*M.fps).toFixed(2)+"% : "+n+" FPS",ya+200,za-10-14,10,10<n?r.guiwhite:r.orange,"right");v[0].draw(y+".0 ms",
ya+200,za-10,10,r.guiwhite,"right");var Aa=a.screenWidth-200-20,Fa=41;E.draw("Leaderboard",Math.round(Aa+100)+.5,Math.round(Fa-6)+.5,18,r.guiwhite,"center");var yb=0;W.data.forEach(function(u){ha(Aa,Aa+200,Fa+7,11+Q.graphical.barChunk,r.black);ha(Aa,Aa+200,Fa+7,11,r.grey);ha(Aa,Aa+200*Math.min(1,u.score/da),Fa+7,10.5,u.barColor);J[yb++].draw(u.label+": "+S.handleLargeNumber(Math.round(u.score)),Aa+100,Fa+7,9,r.guiwhite,"center",!0);var R=14/u.position.axis;Da(Aa-21-R*u.position.middle.x*.707,Fa+7+
R*u.position.middle.x*.707,u.image,1/R,1,R*R/u.image.size,-Math.PI/4,!0);Fa+=18});b.set(0+(a.canUpgrade||a.upgradeHover));var pb=b.get();a.clickables.upgrade.hide();if(0<M.upgrades.length){a.canUpgrade=!0;var zb=function(u){switch(u){case 0:return"y";case 1:return"h";case 2:return"u";case 3:return"j";case 4:return"i";case 5:return"k";case 6:return"o";case 7:return"l"}},qa=40*pb-20,Ab=qa,ta=20;T=qa;var qb=0,Ua=ta,rb=0;Ja+=.01;var sb=10,Va=0;M.upgrades.forEach(function(u){ta>Ua&&(Ua=ta);qb=qa;a.clickables.upgrade.place(Va++,
qa*a.scaleGuiRatio,ta*a.scaleGuiRatio,100*a.scaleGuiRatio,100*a.scaleGuiRatio);p.globalAlpha=.5;p.fillStyle=L(sb);la(qa,ta,100,100);p.globalAlpha=.1;p.fillStyle=L(-10+sb++);la(qa,ta,100,60);p.fillStyle=r.black;la(qa,ta+60,100,40);p.globalAlpha=1;var R=N(u,M.color);u=ra[u].position;var Y=60/u.axis;Da(qa+50-Y*u.middle.x*Math.cos(Ja),ta+50-Y*u.middle.x*Math.sin(Ja),R,1,1,Y/R.size,Ja,!0);x[Va-1].draw(R.name,qa+45,ta+100-6,9.5,r.guiwhite,"center");w[Va-1].draw("["+zb(rb)+"]",qa+100-4,ta+100-6,9.5,r.guiwhite,
"right");p.strokeStyle=r.black;p.globalAlpha=1;p.lineWidth=3;la(qa,ta,100,100,!0);0===++rb%3?(qa=Ab,ta+=114):qa+=114*pb});W=Sa("Don't Upgrade",11)+10;T+=(qb+100+14-T)/2;P=Ua+100+14;ha(T-W/2,T+W/2,P+7,14+Q.graphical.barChunk,r.black);ha(T-W/2,T+W/2,P+7,14,r.white);C.draw("Don't Upgrade",T,P+7,12,r.guiwhite,"center",!0);a.clickables.skipUpgrades.place(0,(T-W/2)*a.scaleGuiRatio,P*a.scaleGuiRatio,W*a.scaleGuiRatio,14*a.scaleGuiRatio)}else a.canUpgrade=!1,a.clickables.upgrade.hide(),a.clickables.skipUpgrades.hide();
K(1/a.scaleGuiRatio,!0);pa()}}(),vb=function(){var d=z(),g=z(),b=z(),f=z(),c=z(),h=z(),e=z(),m=function(){var k="";a.finalKillers.length?(k="\ud83d\udd2a Succumbed to",a.finalKillers.forEach(function(D){k+=" "+S.addArticle(ra[D].name)+" and"}),k=k.slice(0,-4)+"."):k+="\ud83e\udd37 Well that was kinda dumb huh";return k};return function(){fa(r.black,.25);var k=a.screenWidth/2,D=a.screenHeight/2-50,q=N(M.type,M.color),l=ra[M.type].position,v=140/l.axis;Da(a.screenWidth/2-v*l.middle.x*.707-190-70,a.screenHeight/
2-35+v*l.middle.x*.707-10,q,1.5,1,.5*v/q.realSize,-Math.PI/4,!0);d.draw("lol you died",k,D-80,8,r.guiwhite,"center");g.draw("Level "+M.__s.getLevel()+" "+ra[M.type].name+".",k-170,D-30,24,r.guiwhite);b.draw("Final score: "+S.formatLargeNumber(Math.round(a.finalScore.get())),k-170,D+25,50,r.guiwhite);f.draw("\u231a Survived for "+S.timeForHumans(Math.round(a.finalLifetime.get()))+".",k-170,D+55,16,r.guiwhite);q=c.draw;l=[Math.round(a.finalKills[0].get()),Math.round(a.finalKills[1].get()),Math.round(a.finalKills[2].get())];
v=l[0]+.5*l[1]+3*l[2];q.call(c,(0===v?"\ud83c\udf3c":4>v?"\ud83c\udfaf":8>v?"\ud83d\udca5":15>v?"\ud83d\udca2":25>v?"\ud83d\udd25":50>v?"\ud83d\udca3":75>v?"\ud83d\udc7a":100>v?"\ud83c\udf36\ufe0f":"\ud83d\udcaf")+(l[0]||l[1]||l[2]?" "+(l[0]?l[0]+" kills":"")+(l[0]&&l[1]?" and ":"")+(l[1]?l[1]+" assists":"")+((l[0]||l[1])&&l[2]?" and ":"")+(l[2]?l[2]+" visitors defeated":""):" A true pacifist")+".",k-170,D+77,16,r.guiwhite);h.draw(m(),k-170,D+99,16,r.guiwhite);e.draw("Press enter to play again!",
k,D+125,16,r.guiwhite,"center")}}(),ub=function(){var d=z(),g=z();return function(){fa(r.white,.5);d.draw("Connecting...",a.screenWidth/2,a.screenHeight/2,30,r.guiwhite,"center");g.draw(a.message,a.screenWidth/2,a.screenHeight/2+30,15,r.lgreen,"center")}}(),wb=function(){var d=z(),g=z();return function(){fa(Ha(r.red,r.guiblack,.3),.25);d.draw("(Press enter to reconnect)",a.screenWidth/2,a.screenHeight/2-30,15,r.guiwhite,"center");d.draw("\ud83d\udc80 Disconnected. \ud83d\udc80",a.screenWidth/2,a.screenHeight/
2,30,r.guiwhite,"center");g.draw(a.message,a.screenWidth/2,a.screenHeight/2+30,15,r.orange,"center")}}();Za();setTimeout(function(){a.animations.enterToStartActivated=!0},3E3);setTimeout(function(){a.animations.loading=!0;S.pullJSON((a.secure?window.location.protocol+"//":"http://")+a.server+"/versionInfo.json").then(function(d){console.log(d);a.serverVersion=d.version;a.version!=d.version&&(a.state=2)})},1E3)})();}).call(this || window)
